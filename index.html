<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººæ¬Šå®ˆè­·è€… - Human Rights Defenders</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .game-container {
            max-width: 1200px;
            width: 95%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 15px;
            color: white;
        }

        .game-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin: 20px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .board-cell {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border: 2px solid #ddd;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-size: 0.8em;
            text-align: center;
            padding: 5px;
        }

        .board-cell:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .board-cell.start {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }

        .board-cell.challenge {
            background: linear-gradient(135deg, #e17055 0%, #fdcb6e 100%);
        }

        .board-cell.opportunity {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
        }

        .board-cell.goal {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
        }

        .player-info {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            gap: 15px;
        }

        .player-card {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #6c5ce7;
        }

        .player-card h3 {
            color: #6c5ce7;
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }

        .stat {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            flex: 1;
            margin: 0 5px;
        }

        .control-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .event-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #e17055;
            display: none;
        }

        .event-card.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dice {
            font-size: 2em;
            margin: 0 10px;
            animation: spin 0.5s ease;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .player-piece {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .player1 { background: #e74c3c; }
        .player2 { background: #3498db; }
        .player3 { background: #2ecc71; }
        .player4 { background: #f39c12; }

        .scenario-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #ddd;
        }

        .scenario-panel h3 {
            color: #2d3436;
            margin-bottom: 15px;
        }

        .choice-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .choice-btn {
            flex: 1;
            padding: 10px;
            background: #74b9ff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .choice-btn:hover {
            background: #0984e3;
            transform: translateY(-2px);
        }

        .achievement-badge {
            display: inline-block;
            background: #00b894;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin: 2px;
        }

        .game-log {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }

        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
            font-size: 0.9em;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            text-align: center;
            animation: modalAppear 0.3s ease;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1>ğŸŒ äººæ¬Šå®ˆè­·è€…</h1>
            <p>Human Rights Defenders - é€ééŠæˆ²å­¸ç¿’äººæ¬Šåƒ¹å€¼</p>
        </div>

        <div class="player-info">
            <div class="player-card">
                <h3>ğŸ‘¤ ç©å®¶1 - è¨˜è€…</h3>
                <div class="stats">
                    <div class="stat">
                        <strong>å½±éŸ¿åŠ›</strong><br>
                        <span id="player1-influence">50</span>
                    </div>
                    <div class="stat">
                        <strong>è³‡æº</strong><br>
                        <span id="player1-resources">30</span>
                    </div>
                    <div class="stat">
                        <strong>è²æœ›</strong><br>
                        <span id="player1-reputation">40</span>
                    </div>
                </div>
                <div id="player1-achievements"></div>
            </div>
            
            <div class="player-card">
                <h3>âš–ï¸ ç©å®¶2 - å¾‹å¸«</h3>
                <div class="stats">
                    <div class="stat">
                        <strong>å½±éŸ¿åŠ›</strong><br>
                        <span id="player2-influence">45</span>
                    </div>
                    <div class="stat">
                        <strong>è³‡æº</strong><br>
                        <span id="player2-resources">40</span>
                    </div>
                    <div class="stat">
                        <strong>è²æœ›</strong><br>
                        <span id="player2-reputation">35</span>
                    </div>
                </div>
                <div id="player2-achievements"></div>
            </div>
        </div>

        <div class="game-board" id="gameBoard">
            <!-- éŠæˆ²æ£‹ç›¤å°‡ç”±JavaScriptç”Ÿæˆ -->
        </div>

        <div class="control-panel">
            <button class="btn btn-primary" onclick="rollDice()">ğŸ² æ“²éª°å­</button>
            <button class="btn btn-primary" onclick="showRules()">ğŸ“‹ éŠæˆ²è¦å‰‡</button>
            <button class="btn btn-primary" onclick="resetGame()">ğŸ”„ é‡æ–°é–‹å§‹</button>
        </div>

        <div class="event-card" id="eventCard">
            <h3>ğŸ¯ äººæ¬ŠæŒ‘æˆ°</h3>
            <p id="eventDescription">é»æ“Šæ“²éª°å­é–‹å§‹éŠæˆ²ï¼</p>
            <div class="choice-buttons" id="choiceButtons" style="display: none;">
                <button class="choice-btn" onclick="makeChoice('A')">é¸æ“‡ A</button>
                <button class="choice-btn" onclick="makeChoice('B')">é¸æ“‡ B</button>
                <button class="choice-btn" onclick="makeChoice('C')">é¸æ“‡ C</button>
            </div>
        </div>

        <div class="game-log" id="gameLog">
            <div class="log-entry">ğŸ® éŠæˆ²é–‹å§‹ï¼æ­¡è¿ä¾†åˆ°äººæ¬Šå®ˆè­·è€…çš„ä¸–ç•Œ</div>
        </div>
    </div>

    <!-- è¦å‰‡èªªæ˜æ¨¡æ…‹çª— -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>ğŸ¯ éŠæˆ²è¦å‰‡</h2>
            <div style="text-align: left; margin: 20px 0;">
                <h3>ğŸ® éŠæˆ²ç›®æ¨™</h3>
                <p>ä½œç‚ºäººæ¬Šå®ˆè­·è€…ï¼Œä½ çš„ç›®æ¨™æ˜¯é€šéå„ç¨®è¡Œå‹•å’Œæ±ºç­–ä¾†ç¶­è­·äººæ¬Šï¼Œç´¯ç©å½±éŸ¿åŠ›ã€è³‡æºå’Œè²æœ›ã€‚</p>
                
                <h3>ğŸ² éŠæˆ²æµç¨‹</h3>
                <ol>
                    <li>æ“²éª°å­ç§»å‹•æ£‹å­</li>
                    <li>æ ¹æ“šè½åœ°ä½ç½®è§¸ç™¼ä¸åŒäº‹ä»¶</li>
                    <li>é¢å°äººæ¬ŠæŒ‘æˆ°ä¸¦åšå‡ºé¸æ“‡</li>
                    <li>ç²å¾—ç›¸æ‡‰çš„çå‹µæˆ–æ‰¿æ“”å¾Œæœ</li>
                    <li>ç´¯ç©æˆå°±ï¼Œæˆç‚ºçœŸæ­£çš„äººæ¬Šå®ˆè­·è€…</li>
                </ol>
                
                <h3>ğŸ† ç²å‹æ¢ä»¶</h3>
                <p>é¦–å…ˆé”åˆ°ä»¥ä¸‹ä»»ä¸€æ¢ä»¶çš„ç©å®¶ç²å‹ï¼š</p>
                <ul>
                    <li>å½±éŸ¿åŠ›é”åˆ° 100 é»</li>
                    <li>ç²å¾— 5 å€‹æˆå°±å¾½ç« </li>
                    <li>å®Œæˆä¸€è¼ªå®Œæ•´çš„æ£‹ç›¤æ—…ç¨‹</li>
                </ul>
                
                <h3>ğŸ’¡ äººæ¬Šä¸»é¡Œ</h3>
                <p>éŠæˆ²æ¶µè“‹è¨€è«–è‡ªç”±ã€å¹³ç­‰æ¬Šåˆ©ã€æ•™è‚²æ¬Šã€å·¥ä½œæ¬Šã€ç’°å¢ƒæ¬Šç­‰å„ç¨®äººæ¬Šè­°é¡Œã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let gameState = {
            currentPlayer: 1,
            players: {
                1: { position: 0, influence: 50, resources: 30, reputation: 40, achievements: [] },
                2: { position: 0, influence: 45, resources: 40, reputation: 35, achievements: [] }
            },
            gameLog: []
        };

        // äººæ¬Šæƒ…å¢ƒè³‡æ–™åº«
        const scenarios = [
            {
                title: "è¨€è«–è‡ªç”±æŒ‘æˆ°",
                description: "ä¸€ä½è¨˜è€…å› å ±å°æ”¿åºœè²ªè…è¢«å¨è„…ï¼Œä½ æœƒå¦‚ä½•æ”¯æŒä»–ï¼Ÿ",
                choices: {
                    A: { text: "å…¬é–‹è²æ´", influence: 15, reputation: 10, resources: -5 },
                    B: { text: "ç§ä¸‹å”åŠ©", influence: 8, reputation: 5, resources: -3 },
                    C: { text: "ä¿æŒæ²‰é»˜", influence: -5, reputation: -10, resources: 0 }
                }
            },
            {
                title: "æ•™è‚²å¹³ç­‰",
                description: "åé åœ°å€å…’ç«¥é¢è‡¨æ•™è‚²è³‡æºä¸è¶³ï¼Œä½ æ±ºå®šæ¡å–ä»€éº¼è¡Œå‹•ï¼Ÿ",
                choices: {
                    A: { text: "å‹Ÿé›†è³‡é‡‘å»ºå­¸æ ¡", influence: 12, reputation: 8, resources: -10 },
                    B: { text: "æ¨å‹•æ”¿ç­–æ”¹é©", influence: 10, reputation: 12, resources: -5 },
                    C: { text: "çµ„ç¹”å¿—å·¥æ•™å­¸", influence: 8, reputation: 6, resources: -3 }
                }
            },
            {
                title: "å‹å·¥æ¬Šç›Š",
                description: "å·¥å» å“¡å·¥é¢è‡¨æƒ¡åŠ£å·¥ä½œç’°å¢ƒå’Œä½è–ªï¼Œä½ æœƒå¦‚ä½•å¹«åŠ©ä»–å€‘ï¼Ÿ",
                choices: {
                    A: { text: "çµ„ç¹”å·¥æœƒæŠ—è­°", influence: 15, reputation: 5, resources: -8 },
                    B: { text: "å°‹æ±‚æ³•å¾‹é€”å¾‘", influence: 10, reputation: 15, resources: -5 },
                    C: { text: "åª’é«”æ›å…‰", influence: 12, reputation: 8, resources: -3 }
                }
            },
            {
                title: "ç’°å¢ƒæ­£ç¾©",
                description: "åŒ–å·¥å» æ±¡æŸ“å¨è„…ç¤¾å€å¥åº·ï¼Œå±…æ°‘æ±‚åŠ©ç„¡é–€ï¼Œä½ çš„é¸æ“‡æ˜¯ï¼Ÿ",
                choices: {
                    A: { text: "ç™¼èµ·ç’°ä¿é‹å‹•", influence: 18, reputation: 12, resources: -10 },
                    B: { text: "æèµ·å…¬ç›Šè¨´è¨Ÿ", influence: 15, reputation: 18, resources: -8 },
                    C: { text: "å”åŠ©å±…æ°‘æ¬é·", influence: 5, reputation: 8, resources: -15 }
                }
            },
            {
                title: "æ€§åˆ¥å¹³ç­‰",
                description: "å¥³æ€§å“¡å·¥é­å—è·å ´æ€§é¨·æ“¾ï¼Œå‘ä½ æ±‚åŠ©ï¼Œä½ æœƒå¦‚ä½•è™•ç†ï¼Ÿ",
                choices: {
                    A: { text: "é™ªåŒå ±æ¡ˆ", influence: 10, reputation: 15, resources: -5 },
                    B: { text: "æä¾›æ³•å¾‹æ”¯æ´", influence: 12, reputation: 12, resources: -8 },
                    C: { text: "çµ„ç¹”æ”¯æŒåœ˜é«”", influence: 8, reputation: 10, resources: -3 }
                }
            },
            {
                title: "é›£æ°‘å±æ©Ÿ",
                description: "å¤§æ‰¹é›£æ°‘éœ€è¦äººé“æ´åŠ©ï¼Œä½†é¢è‡¨æ”¿æ²»é˜»åŠ›ï¼Œä½ çš„è¡Œå‹•æ˜¯ï¼Ÿ",
                choices: {
                    A: { text: "ç›´æ¥æä¾›æ´åŠ©", influence: 20, reputation: 15, resources: -15 },
                    B: { text: "éŠèªªæ”¿åºœæ”¿ç­–", influence: 15, reputation: 20, resources: -10 },
                    C: { text: "ç™¼èµ·å‹Ÿæ¬¾æ´»å‹•", influence: 12, reputation: 10, resources: -5 }
                }
            }
        ];

        // æˆå°±ç³»çµ±
        const achievements = [
            { name: "è¨€è«–è‡ªç”±å®ˆè­·è€…", condition: "influence >= 70", badge: "ğŸ¤" },
            { name: "å¹³ç­‰æ¬Šåˆ©å€¡å°è€…", condition: "reputation >= 60", badge: "âš–ï¸" },
            { name: "è³‡æºæ•´åˆå°ˆå®¶", condition: "resources >= 50", badge: "ğŸ’°" },
            { name: "ç¤¾å€é ˜å°è€…", condition: "influence + reputation >= 100", badge: "ğŸ‘¥" },
            { name: "äººæ¬Šæˆ°å£«", condition: "influence >= 80 && reputation >= 50", badge: "ğŸ›¡ï¸" }
        ];

        // åˆå§‹åŒ–éŠæˆ²æ£‹ç›¤
        function initializeBoard() {
            const board = document.getElementById('gameBoard');
            const cellTypes = ['start', 'challenge', 'opportunity', 'challenge', 'goal', 'challenge', 'opportunity', 'challenge'];
            
            for (let i = 0; i < 64; i++) {
                const cell = document.createElement('div');
                cell.className = 'board-cell';
                cell.id = `cell-${i}`;
                
                if (i === 0) {
                    cell.classList.add('start');
                    cell.innerHTML = '<div>ğŸ </div><div>èµ·é»</div>';
                } else if (i % 8 === 0) {
                    cell.classList.add('goal');
                    cell.innerHTML = '<div>ğŸ¯</div><div>é‡Œç¨‹ç¢‘</div>';
                } else if (i % 3 === 0) {
                    cell.classList.add('challenge');
                    cell.innerHTML = '<div>âš¡</div><div>æŒ‘æˆ°</div>';
                } else if (i % 5 === 0) {
                    cell.classList.add('opportunity');
                    cell.innerHTML = '<div>ğŸ’¡</div><div>æ©Ÿæœƒ</div>';
                } else {
                    cell.innerHTML = '<div>ğŸ“</div><div>æ™®é€š</div>';
                }
                
                cell.addEventListener('click', () => cellClicked(i));
                board.appendChild(cell);
            }
            
            // æ”¾ç½®ç©å®¶æ£‹å­
            updatePlayerPositions();
        }

        // æ›´æ–°ç©å®¶ä½ç½®
        function updatePlayerPositions() {
            // æ¸…é™¤æ‰€æœ‰æ£‹å­
            document.querySelectorAll('.player-piece').forEach(piece => piece.remove());
            
            // é‡æ–°æ”¾ç½®æ£‹å­
            Object.keys(gameState.players).forEach(playerId => {
                const position = gameState.players[playerId].position;
                const cell = document.getElementById(`cell-${position}`);
                const piece = document.createElement('div');
                piece.className = `player-piece player${playerId}`;
                cell.appendChild(piece);
            });
        }

        // æ“²éª°å­
        function rollDice() {
            const dice = Math.floor(Math.random() * 6) + 1;
            const player = gameState.players[gameState.currentPlayer];
            
            // ç§»å‹•ç©å®¶
            player.position = (player.position + dice) % 64;
            updatePlayerPositions();
            
            // è§¸ç™¼äº‹ä»¶
            const cellType = document.getElementById(`cell-${player.position}`).classList;
            if (cellType.contains('challenge') || cellType.contains('opportunity')) {
                showScenario();
            } else if (cellType.contains('goal')) {
                showMilestone();
            }
            
            // è¨˜éŒ„æ—¥èªŒ
            addToLog(`ç©å®¶${gameState.currentPlayer} æ“²å‡º ${dice} é»ï¼Œç§»å‹•åˆ°ä½ç½® ${player.position}`);
            
            // æ›´æ–°é¡¯ç¤º
            updatePlayerStats();
            
            // åˆ‡æ›ç©å®¶
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
        }

        // é¡¯ç¤ºæƒ…å¢ƒ
        function showScenario() {
            const scenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            const eventCard = document.getElementById('eventCard');
            const eventDescription = document.getElementById('eventDescription');
            const choiceButtons = document.getElementById('choiceButtons');
            
            eventCard.className = 'event-card active';
            eventDescription.textContent = scenario.description;
            choiceButtons.style.display = 'flex';
            
            // å„²å­˜ç•¶å‰æƒ…å¢ƒ
            gameState.currentScenario = scenario;
        }

        // é¡¯ç¤ºé‡Œç¨‹ç¢‘
        function showMilestone() {
            const player = gameState.players[gameState.currentPlayer];
            const bonus = {
                influence: 10,
                reputation: 8,
                resources: 5
            };
            
            player.influence += bonus.influence;
            player.reputation += bonus.reputation;
            player.resources += bonus.resources;
            
            const eventCard = document.getElementById('eventCard');
            const eventDescription = document.getElementById('eventDescription');
            const choiceButtons = document.getElementById('choiceButtons');
            
            eventCard.className = 'event-card active';
            eventDescription.textContent = `ğŸ‰ æ­å–œï¼ä½ é”æˆäº†ä¸€å€‹é‡Œç¨‹ç¢‘ï¼ç²å¾—å½±éŸ¿åŠ›+${bonus.influence}ã€è²æœ›+${bonus.reputation}ã€è³‡æº+${bonus.resources}`;
            choiceButtons.style.display = 'none';
            
            addToLog(`ç©å®¶${gameState.currentPlayer} é”æˆé‡Œç¨‹ç¢‘ï¼Œç²å¾—è±åšçå‹µï¼`);
            updatePlayerStats();
            checkAchievements();
        }

        // åšå‡ºé¸æ“‡
        function makeChoice(choice) {
            const scenario = gameState.currentScenario;
            const player = gameState.players[gameState.currentPlayer];
            const result = scenario.choices[choice];
            
            // æ‡‰ç”¨é¸æ“‡çµæœ
            player.influence += result.influence;
            player.reputation += result.reputation;
            player.resources += result.resources;
            
            // ç¢ºä¿æ•¸å€¼ä¸ç‚ºè² 
            player.influence = Math.max(0, player.influence);
            player.reputation = Math.max(0, player.reputation);
            player.resources = Math.max(0, player.resources);
            
            // éš±è—äº‹ä»¶å¡
            document.getElementById('eventCard').className = 'event-card';
            document.getElementById('choiceButtons').style.display = 'none';
            
            // è¨˜éŒ„æ—¥èªŒ
            addToLog(`ç©å®¶${gameState.currentPlayer} é¸æ“‡äº† ${choice}ï¼š${result.text}`);
            
            // æ›´æ–°é¡¯ç¤º
            updatePlayerStats();
            checkAchievements();
            checkWinCondition();
        }

        // æª¢æŸ¥æˆå°±
        function checkAchievements() {
            const player = gameState.players[gameState.currentPlayer];
            
            achievements.forEach(achievement => {
                if (!player.achievements.includes(achievement.name)) {
                    // ç°¡åŒ–çš„æˆå°±æª¢æŸ¥
                    let earned = false;
                    if (achievement.name === "è¨€è«–è‡ªç”±å®ˆè­·è€…" && player.influence >= 70) earned = true;
                    if (achievement.name === "å¹³ç­‰æ¬Šåˆ©å€¡å°è€…" && player.reputation >= 60) earned = true;
                    if (achievement.name === "è³‡æºæ•´åˆå°ˆå®¶" && player.resources >= 50) earned = true;
                    if (achievement.name === "ç¤¾å€é ˜å°è€…" && (player.influence + player.reputation) >= 100) earned = true;
                    if (achievement.name === "äººæ¬Šæˆ°å£«" && player.influence >= 80 && player.reputation >= 50) earned = true;
                    
                    if (earned) {
                        player.achievements.push(achievement.name);
                        addToLog(`ğŸ† ç©å®¶${gameState.currentPlayer} ç²å¾—æˆå°±ï¼š${achievement.name}`);
                        
                        // é¡¯ç¤ºæˆå°±å¾½ç« 
                        const achievementDiv = document.getElementById(`player${gameState.currentPlayer}-achievements`);
                        const badge = document.createElement('span');
                        badge.className = 'achievement-badge';
                        badge.textContent = `${achievement.badge} ${achievement.name}`;
                        achievementDiv.appendChild(badge);
                    }
                }
            });
        }

        // æª¢æŸ¥ç²å‹æ¢ä»¶
        function checkWinCondition() {
            const player = gameState.players[gameState.currentPlayer];
            
            if (player.influence >= 100) {
                showWinModal(`ç©å®¶${gameState.currentPlayer} æ†‘è—‰å“è¶Šçš„å½±éŸ¿åŠ›ç²å‹ï¼`);
            } else if (player.achievements.length >= 5) {
                showWinModal(`ç©å®¶${gameState.currentPlayer} æ†‘è—‰çœ¾å¤šæˆå°±ç²å‹ï¼`);
            } else if (player.position === 0 && gameState.gameLog.length > 10) {
                showWinModal(`ç©å®¶${gameState.currentPlayer} å®Œæˆäººæ¬Šå®ˆè­·ä¹‹æ—…ç²å‹ï¼`);
            }
        }

        // é¡¯ç¤ºç²å‹æ¨¡æ…‹çª—
        function showWinModal(message) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <h2>ğŸ‰ éŠæˆ²çµæŸï¼</h2>
                    <p style="font-size: 1.2em; margin: 20px 0;">${message}</p>
                    <button class="btn btn-primary" onclick="resetGame(); this.parentElement.parentElement.remove();">é‡æ–°é–‹å§‹</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // æ›´æ–°ç©å®¶çµ±è¨ˆ
        function updatePlayerStats() {
            Object.keys(gameState.players).forEach(playerId => {
                const player = gameState.players[playerId];
                document.getElementById(`player${playerId}-influence`).textContent = player.influence;
                document.getElementById(`player${playerId}-resources`).textContent = player.resources;
                document.getElementById(`player${playerId}-reputation`).textContent = player.reputation;
            });
        }

        // æ·»åŠ åˆ°éŠæˆ²æ—¥èªŒ
        function addToLog(message) {
            const log = document.getElementById('gameLog');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = message;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // é¡¯ç¤ºè¦å‰‡
        function showRules() {
            document.getElementById('rulesModal').style.display = 'block';
        }

        // é—œé–‰æ¨¡æ…‹çª—
        function closeModal() {
            document.getElementById('rulesModal').style.display = 'none';
        }

        // é‡ç½®éŠæˆ²
        function resetGame() {
            gameState = {
                currentPlayer: 1,
                players: {
                    1: { position: 0, influence: 50, resources: 30, reputation: 40, achievements: [] },
                    2: { position: 0, influence: 45, resources: 40, reputation: 35, achievements: [] }
                },
                gameLog: []
            };
            
            document.getElementById('gameLog').innerHTML = '<div class="log-entry">ğŸ® éŠæˆ²é‡æ–°é–‹å§‹ï¼</div>';
            document.getElementById('player1-achievements').innerHTML = '';
            document.getElementById('
